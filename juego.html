<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Adivina el País</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body class="d-flex flex-column justify-content-center align-items-center">

  <h1 class="mb-4 text-primary fw-bold">Adivina el País por su Capital</h1>

  <div class="game-card">

    <p id="capital" class="capital">Cargando...</p>

    <div id="options" class="d-grid gap-2"></div>

    <p id="feedback" class="feedback"></p>

    <button id="nextBtn" class="btn btn-success btn-next" onclick="nuevaPregunta()">Siguiente ➡️</button>
  </div>

  <a href="index.html" class="btn btn-outline-secondary mt-4">⬅️ Volver al Buscador</a>

<script>

let paises = [];
let paisCorrecto = null;

async function cargarPaises() {
  try {
    const res = await fetch("https://restcountries.com/v3.1/all?fields=name,capital");
    if (!res.ok) throw 0;
    const data = await res.json();

    paises = data.filter(p => p.capital);
  } catch {
    paises = [
      { name: { common: "Argentina" }, capital: ["Buenos Aires"] },
      { name: { common: "Francia" }, capital: ["París"] },
      { name: { common: "Japón" }, capital: ["Tokio"] },
      { name: { common: "Canadá" }, capital: ["Ottawa"] }
    ];
  }

  nuevaPregunta();
}

function nuevaPregunta() {

  feedback.textContent = "";
  nextBtn.style.display = "none";

  paisCorrecto = paises[Math.random() * paises.length | 0];

  capital.textContent = `¿De qué país es la capital "${paisCorrecto.capital[0]}"?`;

  const opciones = [paisCorrecto];

  while (opciones.length < 4) {
    let p = paises[Math.random() * paises.length | 0];
    if (!opciones.includes(p)) opciones.push(p);
  }

  opciones.sort(() => Math.random() - 0.5);

  options.replaceChildren();

  opciones.forEach(p => {
    const btn = document.createElement("button");
    btn.classList.add("btn", "btn-outline-primary", "btn-option");
    btn.textContent = p.name.common;

    btn.addEventListener("click", () => verificar(p.name.common));

    options.appendChild(btn);
  });
}

function verificar(sel) {

  document.querySelectorAll(".btn-option").forEach(b => b.disabled = true);

  if (sel === paisCorrecto.name.common) {
    feedback.textContent = "✅ ¡Correcto!";
    feedback.className = "feedback text-success";
  } else {
    feedback.textContent = `❌ Incorrecto. Era ${paisCorrecto.name.common}`;
    feedback.className = "feedback text-danger";
  }

  nextBtn.style.display = "block";
}

cargarPaises();

/*
Bootstrap 5.3.3
Recurso utilizado: Sistema de estilos y componentes CSS.
Fuente: https://getbootstrap.com/
CDN usado: jsDelivr
Autor: Bootstrap Team 
Licencia: MIT License

API RestCountries
Recurso utilizado: Datos de países y capitales.
URL de API: https://restcountries.com/
Autor: RestCountries Project contributors
Licencia: CC BY 4.0 – Creative Commons Attribution 4.0

MDN Web Docs (JavaScript)
Sintaxis de JavaScript, métodos, fetch, arrays, DOM.
Fuente: https://developer.mozilla.org/es/docs/Web/JavaScript
Autor: Mozilla Developer Network (Mozilla + comunidad)
Licencia: CC BY-SA 2.5

HTLM, RESPONSIVE
Sitio oficial: https://plataformas-moviles.tecnica4berazategui.edu.ar/
autor:José Yedro
*/
</script>

</body>
</html>

